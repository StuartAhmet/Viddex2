<div class="flex">
      <% if @background.text_distortion?
      distortion_params = "distort:"+@background.distort_nw_x.to_s+":"+@background.distort_nw_y.to_s+":"+
                          @background.distort_ne_x.to_s+":"+@background.distort_ne_y.to_s+":"+
                          @background.distort_se_x.to_s+":"+@background.distort_se_y.to_s+":"+
                          @background.distort_sw_x.to_s+":"+@background.distort_sw_y.to_s
    else
      distortion_params = nil
    end %>
    <div style="max-width:50%">
        <div class="image-100">
          <% if @background.photo.content_type.include? "video"%>
            <%= cl_image_tag(@background.photo.key+".gif",
              # {:width=>1280, :quality=>"auto", :crop=>"scale"},
              :border=>"6px_solid_rgb:000", :effect=>distortion_params, :x=>@background.x_axis,
              :gravity=>"north_west", :y=>@background.y_axis,
              :width=>@background.width, :height=>@background.text_box_height, :angle=>@background.angle,
              # text distortion params

              #  text params
                :overlay=>
                {:font_family=>"Neucha", :font_size=>36,
                :text=>"This box is to help you set the shape and size of the text box associated with this image. The boarder will not be visible in your projects. Lorem%20ipsum%20dolor%20sit%20amet%20consectetur%20adipisicing%20elit%20sed%20do%20eiusmod%20tempor%20incididunt%20ut%20labore%20et%20dolore%20magna%20aliqua.%20Ut%20enim%20ad%20minim%20veniam%20quis%20nostrud%20exercitation%20ullamco%20laboris%20nisi%20ut%20aliquip%20ex%20ea%20commodo%20consequat"},
              :crop=>"fit", :resource_type=>"video"
            ) %>
          <% elsif @background.photo.content_type.include? "image"%>
            <%= cl_image_tag(@background.photo.key,
              {:width=>1280, :quality=>"auto", :crop=>"scale"},
              {:border=>"6px_solid_rgb:000", :x=>@background.x_axis,
              :gravity=>"north_west", :y=>@background.y_axis,
              :width=>@background.width, :height=>@background.text_box_height, :angle=>@background.angle,
              # text distortion params
              distort: distortion_params,
              #  text params
                :overlay=>
                {:font_family=>"Neucha", :font_size=>36,
                :text=>"This box is to help you set the shape and size of the text box associated with this image. The boarder will not be visible in your projects. Lorem%20ipsum%20dolor%20sit%20amet%20consectetur%20adipisicing%20elit%20sed%20do%20eiusmod%20tempor%20incididunt%20ut%20labore%20et%20dolore%20magna%20aliqua.%20Ut%20enim%20ad%20minim%20veniam%20quis%20nostrud%20exercitation%20ullamco%20laboris%20nisi%20ut%20aliquip%20ex%20ea%20commodo%20consequat"},
              :crop=>"fit"}
            ) %>
            <% end %>

      </div>
    </div>
    <div>
      <%= simple_form_for [@user, @background], html: { class: "form-container"} do |f| %>
      <%# <div style="width:400px;padding-top: 20px;margin-right: 30px;"> %>
          <p><strong>Title</strong></p>
          <%= f.input :title, label: false, input_html: { class: "form-input-100" }  %>
        <p> Text Box Options</p>
        <div class="flex space-between">
          <div>
            <p><strong>Width</strong></p>
            <%= f.input :width, label: false, input_html: { class: "form-input-100" }   %>
          </div>
          <div>
            <p><strong>Height</strong></p>
            <%= f.input :text_box_height, label: false, input_html: { class: "form-input-100" }   %>
          </div>
          <div>
            <p><strong>Angle</strong></p>
            <%= f.input :angle, label: false, input_html: { class: "form-input-100" }   %>
          </div>
        </div>
        <div class="flex space-between">
          <div>
            <p><strong>Horizontal Axis</strong></p>
            <%= f.input :x_axis, label: false, input_html: { class: "form-input-100" }   %>
          </div>
          <div>
            <p><strong>Vertical Axis</strong></p>
            <%= f.input :y_axis, label: false, input_html: { class: "form-input-100" }   %>
          </div>
        </div>
        <div class="form-check form-switch">
          <%= f.check_box :text_distortion, class: "form-check-input", id: "distort-checkbox"  %>
          <label class="form-check-label" for="distort-checkbox">Distort text?</label>
        </div>
        <div class="distort-options hidden">
          <div class="flex space-between">
            <div class="flex"style="width:45%">
              <%= f.input :distort_nw_x, label: "X" %>
              <%= f.input :distort_nw_y, label: "Y" %>
            </div>
            <div class="flex"style="width:45%">
              <%= f.input :distort_ne_x, label: "X" %>
              <%= f.input :distort_ne_y, label: "Y" %>
            </div>
          </div>
          <div class="flex space-between">
            <div class="flex"style="width:45%">
              <%= f.input :distort_sw_x, label: "X" %>
              <%= f.input :distort_sw_y, label: "Y" %>
            </div>
            <div class="flex"style="width:45%">
              <%= f.input :distort_se_x, label: "X" %>
              <%= f.input :distort_se_y, label: "Y" %>
            </div>
          </div>
        </div>

          <%= f.submit 'Save and preview', class: 'nav-link lb-btn', style: "border:none;width:100%"%>
        <% end %>
    </div>

  </div>




</div>
