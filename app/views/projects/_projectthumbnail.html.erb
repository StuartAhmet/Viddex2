<%= cl_video_tag(@project.video.file.key,
  controls: true,
  preload: "metadata",
  width: "100%",
  poster: false,
  :transformation=>[
    # video params
    {angle: @project.video.rotation},
    # message params
    {angle: @project.background.angle || 0,
    gravity: "north",
    :overlay=>{
      font_family: @project.font,
      font_size: @project.font_size,
      text: @project.message + "%0d"+ @project.message_body || @project.message},
      opacity: @project.opacity.to_s,
      width: @project.background.width.to_s,
      x: @project.background.x_axis.to_s,
      y: @project.background.y_axis.to_s,
      crop: "fit",
      },
    # background image params
    {underlay: Rails.env+":"+@project.background.photo.key,
      width: 1280,
      crop: "scale"}])
%>
